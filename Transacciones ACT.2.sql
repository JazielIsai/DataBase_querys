	CREATE DATABASE BD_REVISTAS
	USE BD_REVISTAS

	CREATE TABLE REVISTA(
	ISSN INT,
	NUMERO INT,
	TITULO VARCHAR(30),
	AÑO INT
	CONSTRAINT CK_PK PRIMARY KEY(ISSN,NUMERO)
	);

	CREATE TABLE ARTICULO(
	ISSN INT,
	NUMERO INT,
	TITULO VARCHAR(30) PRIMARY KEY,
	PAGINA_INI INT,
	PAGINA_FIN INT,
	CONSTRAINT FK_ART FOREIGN KEY (ISSN, NUMERO) REFERENCES REVISTA (ISSN, NUMERO)
	);


	CREATE TABLE AUTORES(
	NOMBRE VARCHAR(15) PRIMARY KEY,
	CORREO VARCHAR(30),
	ADSCRIPCION VARCHAR(15)
	);

	CREATE TABLE ESCRIBE(
	TITULO VARCHAR(30),
	NOMBRE VARCHAR(15),
	POSICION INT,
	CONSTRAINT FK_ESC FOREIGN KEY (TITULO) REFERENCES ARTICULO (TITULO),
	CONSTRAINT FK_ESC2 FOREIGN KEY (NOMBRE) REFERENCES AUTORES (NOMBRE)
	);

	--tabla revista

	--1 Llenar con almenos 10 registros cada una de las tablas.
	INSERT INTO REVISTA VALUES (110, 1, 'EL SOL', 2016)
	INSERT INTO REVISTA VALUES (111, 2, 'JUNNIOR Y CIENCIA', 2017)
	INSERT INTO REVISTA VALUES (112, 3, 'EL MILEANISTA', 2020)
	INSERT INTO REVISTA VALUES (113, 4, 'EL ECOMONISTA', 2010)
	INSERT INTO REVISTA VALUES (114, 5, 'EL IDEALISMO', 2020)
	INSERT INTO REVISTA VALUES (115, 6, 'LA UTOPIA', 2018)
	INSERT INTO REVISTA VALUES (116, 7, 'EL CAPITALISMO', 2019)
	INSERT INTO REVISTA VALUES (117, 8, 'EL RELATIVISMO', 2017)
	INSERT INTO REVISTA VALUES (118, 9, 'EL RETORICO', 2021)
	INSERT INTO REVISTA VALUES (119, 10, 'EDUCACIÓN', 2020)
	
	SELECT * FROM REVISTA
	
	--TABLA ARTICULO

	--1
	INSERT INTO ARTICULO VALUES (110, 1, 'RELATIVISMO', 1, 100)
	INSERT INTO ARTICULO VALUES (111, 2, 'PARTIDOS POLITICOS', 1, 178)
	INSERT INTO ARTICULO VALUES (112, 3, 'IDEALISMO', 1, 200)
	INSERT INTO ARTICULO VALUES (113, 4, 'LA UTOPIA DE LA EDAD MODERNA', 1, 250)
	INSERT INTO ARTICULO VALUES (114, 5, 'CULTURA DE LA EDAD MODERNA', 1, 148)
	INSERT INTO ARTICULO VALUES (115, 6, 'CULTURA POSMODERNA', 1, 159)
	INSERT INTO ARTICULO VALUES (116, 7, 'TECNOLOGIA', 1, 135)
	INSERT INTO ARTICULO VALUES (117, 8, 'AVANCES TECNOLOGICOS', 1, 99)
	INSERT INTO ARTICULO VALUES (118, 9, 'AVANCES CIENTIFICOS', 1, 154)
	INSERT INTO ARTICULO VALUES (119, 10, 'CIENCIA', 1, 98)

	SELECT * FROM ARTICULO

	--TABLA AUTORES
	--1
	INSERT INTO AUTORES VALUES ('MAXIMILIANO', 'MAXIMILIANO21@GMAIL.COM', 'ACTIVO')
	INSERT INTO AUTORES VALUES ('MARION', 'MARION21@GMAIL.COM', 'PASIVO')
	INSERT INTO AUTORES VALUES ('MARIANA', 'MARIANA21@GMAIL.COM', 'ACTIVO')
	INSERT INTO AUTORES VALUES ('MARIEL', 'MARIEL21@GMAIL.COM', 'PASIVO')
	INSERT INTO AUTORES VALUES ('MAGNOLIA', 'MAGNOLIA21@GMAIL.COM', 'ACTIVO')
	INSERT INTO AUTORES VALUES ('MARIO', 'MARIO21@GMAIL.COM', 'PASIVO')
	INSERT INTO AUTORES VALUES ('MAFE', 'MAFE21@GMAIL.COM', 'ACTIVO')
	INSERT INTO AUTORES VALUES ('MARIA', 'MARIA21@GMAIL.COM', 'PASIVO')
	INSERT INTO AUTORES VALUES ('MIRIAM', 'MIRIAM21@GMAIL.COM', 'ACTIVO')
	INSERT INTO AUTORES VALUES ('MARICELA', 'MARICELA21@GMAIL.COM', 'PASIVO')

	SELECT * FROM AUTORES

	--TABLA ESCRIBE

	--1 INSERTAR REGISTROS
	INSERT INTO ESCRIBE VALUES ('RELATIVISMO', 'MAXIMILIANO', 1)
	INSERT INTO ESCRIBE VALUES ('PARTIDOS POLITICOS', 'MARION', 2)
	INSERT INTO ESCRIBE VALUES ('IDEALISMO', 'MARIANA', 3)
	INSERT INTO ESCRIBE VALUES ('LA UTOPIA DE LA EDAD MODERNA', 'MARIEL', 4)
	INSERT INTO ESCRIBE VALUES ('CULTURA DE LA EDAD MODERNA', 'MAGNOLIA', 5)
	INSERT INTO ESCRIBE VALUES ('CULTURA POSMODERNA', 'MARIO', 6)
	INSERT INTO ESCRIBE VALUES ('TECNOLOGIA', 'MAFE', 7)
	INSERT INTO ESCRIBE VALUES ('AVANCES TECNOLOGICOS', 'MARIA', 8)
	INSERT INTO ESCRIBE VALUES ('AVANCES CIENTIFICOS', 'MIRIAM', 9)
	INSERT INTO ESCRIBE VALUES ('CIENCIA', 'MARICELA', 10)
	
	SELECT * FROM ESCRIBE


	--2. Realizar la inserción de almenos cinco datos en cada tabla por medio de transacciones.
	BEGIN TRAN AGREGAR_REVISTA
	INSERT INTO REVISTA VALUES (111, 11, 'HABLEMOS DE POLITICA', 2021)
	INSERT INTO REVISTA VALUES (112, 12, 'MUY INTERESANTE JUNNIOR', 2020)
	INSERT INTO REVISTA VALUES (113, 13, 'EJERCICIOS DE SALUD', 2019)
	INSERT INTO REVISTA VALUES (114, 14, 'DEPORTE', 2020)
	INSERT INTO REVISTA VALUES (115, 15, 'COCINA', 2019)
	COMMIT TRAN AGREGAR_REVISTA;

	SELECT * FROM REVISTA

	--3 Realizar la actualización de 5 registros en la tabla revistas por medio de transacciones
	BEGIN TRAN ACTUALIZAR1 UPDATE REVISTA SET AÑO = '2021' WHERE ISSN = '118' COMMIT TRAN ACTUALIZAR1;

	BEGIN TRAN ACTUALIZAR2 UPDATE REVISTA SET AÑO = '2020' WHERE ISSN = '114' COMMIT TRAN ACTUALIZAR2;

	BEGIN TRAN ACTUALIZAR3 UPDATE REVISTA SET TITULO = 'MÉTODOS DE EDUCACIÓN' WHERE TITULO = 'EDUCACIÓN' COMMIT TRAN ACTUALIZAR3;

	BEGIN TRAN ACTUALIZAR4 UPDATE REVISTA SET TITULO = 'EL RELATIVISMO Y LO ABSOLUTO' WHERE TITULO = 'EL RELATIVISMO' COMMIT TRAN ACTUALIZAR4;

	BEGIN TRAN ACTUALIZAR5 UPDATE REVISTA SET TITULO = 'COCINA Y COMIDA' WHERE TITULO = 'COCINA' COMMIT TRAN ACTUALIZAR5;

	SELECT * FROM REVISTA



	--TABLA ARTICULO

	--2
	BEGIN TRAN AGREGAR_ART
	INSERT INTO ARTICULO VALUES (111, 11, 'BIG DATA', 1, 18)
	INSERT INTO ARTICULO VALUES (112, 12, 'IA', 1, 15)
	INSERT INTO ARTICULO VALUES (113, 13, 'IoT', 1, 11)
	INSERT INTO ARTICULO VALUES (114, 14, 'SOFTWARE', 1, 25)
	INSERT INTO ARTICULO VALUES (115, 15, 'REDES', 1, 30)
	COMMIT TRAN AGREGAR_ART;

	SELECT * FROM ARTICULO


	--4	Realizar una inserción a tabla articulo por medio de transacciones, 
	--colocando condiciones (if, else, begin try) y utilizando los mensajes de compromiso y de rollback. 

	DECLARE @VARIABLE CHAR(3)
	BEGIN TRAN INSERCION
	IF @@ERROR = 0
	BEGIN
	BEGIN TRY
		DECLARE @TITUL0 CHAR (30)
		SELECT @TITUL0 = TITULO FROM ARTICULO
		INSERT INTO ARTICULO VALUES (103, 08, 'HOLA', 1, 38);
			PRINT 'REGISTRADO CON EXITO'
			COMMIT TRAN INSERCION
	END TRY

	BEGIN CATCH
		PRINT 'ERROR'
		ROLLBACK TRAN INSERCION
	END CATCH
	END

	ELSE
	BEGIN 
	SET @VARIABLE = '';
	PRINT 'DISPONIBLE'
	END

	SELECT * FROM ARTICULO




	--TABLA AUTORES

	--2 
	BEGIN TRAN AGREGAR_AUT
	INSERT INTO AUTORES VALUES ('MARICRUZ', 'MARICRUZ21@GMAIL.COM', 'PASIVO')
	INSERT INTO AUTORES VALUES ('MADAY', 'MADAY21@GMAIL.COM', 'ACTIVO')
	INSERT INTO AUTORES VALUES ('MAIDY', 'MAIDY21@GMAIL.COM', 'PASIVO')
	INSERT INTO AUTORES VALUES ('MICHELLE', 'AARON@GMAIL.COM', 'PASIVO')
	INSERT INTO AUTORES VALUES ('MARIJO', 'MAJO21@GMAIL.COM', 'ACTIVO')
	COMMIT TRAN AGREGAR_AUT;

	SELECT * FROM AUTORES



	--TABLA ESCRIBE

	--2
	BEGIN TRAN AGREGAR_ESC
	INSERT INTO ESCRIBE VALUES ('BIG DATA', 'MARICRUZ', 11)
	INSERT INTO ESCRIBE VALUES ('IA', 'MADAY', 12)
	INSERT INTO ESCRIBE VALUES ('IoT', 'MAIDY', 13)
	INSERT INTO ESCRIBE VALUES ('SOFTWARE', 'MICHELLE', 14)
	INSERT INTO ESCRIBE VALUES ('REDES', 'MARIJO', 15)
	COMMIT TRAN AGREGAR_ESC;

	SELECT * FROM ESCRIBE
